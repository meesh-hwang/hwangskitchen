{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useReducer, createContext, useEffect } from \"react\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar initialState = {\n  isCartOpen: false,\n  items: []\n};\nexport var CartStateContext = createContext();\nexport var CartDispatchContext = createContext();\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case \"ADD_TO_CART\":\n      var id = action.payload.cartItem.id;\n      var isOld = state.items.map(function (item) {\n        return item.id;\n      }).includes(id);\n      var cartItems = null;\n\n      if (isOld) {\n        var items = state.items.map(function (item) {\n          if (item.id === id) {\n            return _objectSpread(_objectSpread({}, item), {}, {\n              quantity: item.quantity + 1\n            });\n          }\n\n          return item;\n        });\n        cartItems = _toConsumableArray(items);\n      } else {\n        cartItems = [].concat(_toConsumableArray(state.items), [action.payload.cartItem]);\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: cartItems\n      });\n\n    case \"REMOVE_FROM_CART\":\n      if (isOld) {\n        var _items = state.items.map(function (item) {\n          if (item.id === id) {\n            return _objectSpread(_objectSpread({}, item), {}, {\n              quantity: item.quantity - 1\n            });\n          }\n\n          return;\n        });\n\n        cartItems = _items.shift();\n      } else {\n        cartItems = [].concat(_toConsumableArray(state.items), [action.payload.cartItem.slice(1)]);\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: cartItems\n      });\n\n    case \"CLEAR_CART\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: state.items.filter(function (item) {\n          return item.id !== action.payload.cartItemId;\n        })\n      });\n\n    default:\n      throw new Error(\"Unknown action: \" + action.type);\n  }\n};\n\nexport var toggleCartPopup = function toggleCartPopup(dispatch) {\n  return dispatch({\n    type: \"TOGGLE_CART_POPUP\"\n  });\n};\nexport var addToCart = function addToCart(dispatch, cartItem) {\n  return dispatch({\n    type: \"ADD_TO_CART\",\n    payload: {\n      cartItem: cartItem\n    }\n  });\n};\nexport var ClearCart = function ClearCart(dispatch, cartItemId) {\n  return dispatch({\n    type: \"CLEAR_CART\",\n    payload: {\n      cartItemId: cartItemId\n    }\n  });\n};\nexport var removeFromCart = function removeFromCart(dispatch, cartItem) {\n  return dispatch({\n    type: \"REMOVE_FROM_CART\",\n    payload: {\n      cartItem: cartItem\n    }\n  });\n};\n\nvar CartProvider = function CartProvider(_ref) {\n  var children = _ref.children;\n\n  var _useLocalStorage = useLocalStorage(\"cartItems\", []),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 2),\n      persistedCartItems = _useLocalStorage2[0],\n      setPersistedCartItems = _useLocalStorage2[1];\n\n  var persistedCartState = {\n    isCartOpen: false,\n    items: persistedCartItems || []\n  };\n\n  var _useReducer = useReducer(reducer, persistedCartState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  useEffect(function () {\n    setPersistedCartItems(state.items);\n  }, [JSON.stringify(state.items)]);\n  return _jsx(CartDispatchContext.Provider, {\n    value: dispatch,\n    children: _jsx(CartStateContext.Provider, {\n      value: state,\n      children: children\n    })\n  });\n};\n\nexport default CartProvider;","map":{"version":3,"sources":["C:/Users/miche/Desktop/hwangskitchen/contexts/cart.js"],"names":["React","useReducer","createContext","useEffect","useLocalStorage","initialState","isCartOpen","items","CartStateContext","CartDispatchContext","reducer","state","action","type","id","payload","cartItem","isOld","map","item","includes","cartItems","quantity","shift","slice","filter","cartItemId","Error","toggleCartPopup","dispatch","addToCart","ClearCart","removeFromCart","CartProvider","children","persistedCartItems","setPersistedCartItems","persistedCartState","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useReducer, createContext, useEffect } from \"react\";\r\nimport useLocalStorage from \"../hooks/useLocalStorage\";\r\n\r\nconst initialState = {\r\n  isCartOpen: false,\r\n  items: []\r\n};\r\n\r\nexport const CartStateContext = createContext();\r\nexport const CartDispatchContext = createContext();\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    \r\n    case \"ADD_TO_CART\":\r\n      const id = action.payload.cartItem.id;\r\n      const isOld = state.items.map((item) => item.id).includes(id);\r\n      let cartItems = null;\r\n      if (isOld) {\r\n        const items = state.items.map((item) => {\r\n          if (item.id === id) {\r\n            return {\r\n              ...item,\r\n              quantity: item.quantity + 1 \r\n            };\r\n          }\r\n          return item;\r\n        });\r\n        cartItems = [...items];\r\n      } else {\r\n        cartItems = [...state.items, action.payload.cartItem];\r\n      }\r\n      return {\r\n        ...state,\r\n        items: cartItems\r\n      };\r\n    case \"REMOVE_FROM_CART\":\r\n      if (isOld) {\r\n        const items = state.items.map((item) => {\r\n          if (item.id === id) {\r\n            return {\r\n              ...item,\r\n              quantity: item.quantity - 1 \r\n            };\r\n          }\r\n          return;\r\n        });\r\n        cartItems = items.shift();\r\n      } else {\r\n        cartItems = [...state.items, action.payload.cartItem.slice(1)];\r\n      }\r\n      return {\r\n        ...state,\r\n        items: cartItems\r\n      };\r\n    case \"CLEAR_CART\":\r\n      return {\r\n        ...state,\r\n        items: state.items.filter(\r\n          (item) => item.id !== action.payload.cartItemId\r\n        )\r\n      };\r\n    default:\r\n      throw new Error(`Unknown action: ${action.type}`);\r\n  }\r\n};\r\n\r\nexport const toggleCartPopup = (dispatch) => {\r\n  return dispatch({\r\n    type: \"TOGGLE_CART_POPUP\"\r\n  });\r\n};\r\n\r\nexport const addToCart = (dispatch, cartItem) => {\r\n  return dispatch({\r\n    type: \"ADD_TO_CART\",\r\n    payload: {\r\n      cartItem: cartItem\r\n    }\r\n  });\r\n};\r\n\r\nexport const ClearCart = (dispatch, cartItemId) => {\r\n  return dispatch({\r\n    type: \"CLEAR_CART\",\r\n    payload: {\r\n      cartItemId: cartItemId\r\n    }\r\n  });\r\n};\r\n\r\nexport const removeFromCart = (dispatch, cartItem) => {\r\n  return dispatch({\r\n    type: \"REMOVE_FROM_CART\",\r\n    payload: {\r\n      cartItem: cartItem\r\n    }\r\n  });\r\n};\r\n\r\nconst CartProvider = ({ children }) => {\r\n  const [persistedCartItems, setPersistedCartItems] = useLocalStorage(\r\n    \"cartItems\",\r\n    []\r\n  );\r\n  const persistedCartState = {\r\n    isCartOpen: false,\r\n    items: persistedCartItems || []\r\n  };\r\n  const [state, dispatch] = useReducer(reducer, persistedCartState);\r\n  useEffect(() => {\r\n    setPersistedCartItems(state.items);\r\n  }, [JSON.stringify(state.items)]);\r\n  return (\r\n    <CartDispatchContext.Provider value={dispatch}>\r\n      <CartStateContext.Provider value={state}>\r\n        {children}\r\n      </CartStateContext.Provider>\r\n    </CartDispatchContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartProvider;\r\n"]},"metadata":{},"sourceType":"module"}