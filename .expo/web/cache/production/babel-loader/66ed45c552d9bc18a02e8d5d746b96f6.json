{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React,{useReducer,createContext,useEffect}from\"react\";import useLocalStorage from\"../hooks/useLocalStorage\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={isCartOpen:false,items:[]};export var CartStateContext=createContext();export var CartDispatchContext=createContext();var reducer=function reducer(state,action){switch(action.type){case\"TOGGLE_CART_POPUP\":return _objectSpread(_objectSpread({},state),{},{isCartOpen:!state.isCartOpen});case\"ADD_TO_CART\":var id=action.payload.cartItem.id;var isOld=state.items.map(function(item){return item.id;}).includes(id);var cartItems=null;if(isOld){var items=state.items.map(function(item){if(item.id===id){return _objectSpread(_objectSpread({},item),{},{quantity:item.quantity+1});}return item;});cartItems=_toConsumableArray(items);}else{cartItems=[].concat(_toConsumableArray(state.items),[action.payload.cartItem]);}return _objectSpread(_objectSpread({},state),{},{items:cartItems});case\"REMOVE_FROM_CART\":return _objectSpread(_objectSpread({},state),{},{items:state.items.filter(function(item){return item.id!==action.payload.cartItemId;})});case\"CLEAR_CART\":return _objectSpread(_objectSpread({},state),initialState);default:throw new Error(\"Unknown action: \"+action.type);}};export var toggleCartPopup=function toggleCartPopup(dispatch){return dispatch({type:\"TOGGLE_CART_POPUP\"});};export var addToCart=function addToCart(dispatch,cartItem){return dispatch({type:\"ADD_TO_CART\",payload:{cartItem:cartItem}});};export var removeFromCart=function removeFromCart(dispatch,cartItemId){return dispatch({type:\"REMOVE_FROM_CART\",payload:{cartItemId:cartItemId}});};export var clearCart=function clearCart(dispatch){return dispatch({type:\"CLEAR_CART\"});};var CartProvider=function CartProvider(_ref){var children=_ref.children;var _useLocalStorage=useLocalStorage(\"cartItems\",[]),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),persistedCartItems=_useLocalStorage2[0],setPersistedCartItems=_useLocalStorage2[1];var persistedCartState={isCartOpen:false,items:persistedCartItems||[]};var _useReducer=useReducer(reducer,persistedCartState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){setPersistedCartItems(state.items);},[JSON.stringify(state.items)]);return _jsx(CartDispatchContext.Provider,{value:dispatch,children:_jsx(CartStateContext.Provider,{value:state,children:children})});};export default CartProvider;","map":{"version":3,"sources":["C:/Users/miche/Desktop/hwangskitchen/contexts/cart.js"],"names":["React","useReducer","createContext","useEffect","useLocalStorage","initialState","isCartOpen","items","CartStateContext","CartDispatchContext","reducer","state","action","type","id","payload","cartItem","isOld","map","item","includes","cartItems","quantity","filter","cartItemId","Error","toggleCartPopup","dispatch","addToCart","removeFromCart","clearCart","CartProvider","children","persistedCartItems","setPersistedCartItems","persistedCartState","JSON","stringify"],"mappings":"k9BAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,aAA5B,CAA2CC,SAA3C,KAA4D,OAA5D,CACA,MAAOC,CAAAA,eAAP,gC,2CAEA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,UAAU,CAAE,KADO,CAEnBC,KAAK,CAAE,EAFY,CAArB,CAKA,MAAO,IAAMC,CAAAA,gBAAgB,CAAGN,aAAa,EAAtC,CACP,MAAO,IAAMO,CAAAA,mBAAmB,CAAGP,aAAa,EAAzC,CAEP,GAAMQ,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,KAAD,CAAQC,MAAR,CAAmB,CACjC,OAAQA,MAAM,CAACC,IAAf,EACE,IAAK,mBAAL,CACE,sCACKF,KADL,MAEEL,UAAU,CAAE,CAACK,KAAK,CAACL,UAFrB,GAIF,IAAK,aAAL,CACE,GAAMQ,CAAAA,EAAE,CAAGF,MAAM,CAACG,OAAP,CAAeC,QAAf,CAAwBF,EAAnC,CACA,GAAMG,CAAAA,KAAK,CAAGN,KAAK,CAACJ,KAAN,CAAYW,GAAZ,CAAgB,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACL,EAAf,EAAhB,EAAmCM,QAAnC,CAA4CN,EAA5C,CAAd,CACA,GAAIO,CAAAA,SAAS,CAAG,IAAhB,CACA,GAAIJ,KAAJ,CAAW,CACT,GAAMV,CAAAA,KAAK,CAAGI,KAAK,CAACJ,KAAN,CAAYW,GAAZ,CAAgB,SAACC,IAAD,CAAU,CACtC,GAAIA,IAAI,CAACL,EAAL,GAAYA,EAAhB,CAAoB,CAClB,sCACKK,IADL,MAEEG,QAAQ,CAAEH,IAAI,CAACG,QAAL,CAAgB,CAF5B,GAID,CACD,MAAOH,CAAAA,IAAP,CACD,CARa,CAAd,CASAE,SAAS,oBAAOd,KAAP,CAAT,CACD,CAXD,IAWO,CACLc,SAAS,8BAAOV,KAAK,CAACJ,KAAb,GAAoBK,MAAM,CAACG,OAAP,CAAeC,QAAnC,EAAT,CACD,CACD,sCACKL,KADL,MAEEJ,KAAK,CAAEc,SAFT,GAIF,IAAK,kBAAL,CACE,sCACKV,KADL,MAEEJ,KAAK,CAAEI,KAAK,CAACJ,KAAN,CAAYgB,MAAZ,CACL,SAACJ,IAAD,QAAUA,CAAAA,IAAI,CAACL,EAAL,GAAYF,MAAM,CAACG,OAAP,CAAeS,UAArC,EADK,CAFT,GAMF,IAAK,YAAL,CACE,sCACKb,KADL,EAEKN,YAFL,EAIF,QACE,KAAM,IAAIoB,CAAAA,KAAJ,oBAA6Bb,MAAM,CAACC,IAApC,CAAN,CAzCJ,CA2CD,CA5CD,CA8CA,MAAO,IAAMa,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,QAAD,CAAc,CAC3C,MAAOA,CAAAA,QAAQ,CAAC,CACdd,IAAI,CAAE,mBADQ,CAAD,CAAf,CAGD,CAJM,CAMP,MAAO,IAAMe,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACD,QAAD,CAAWX,QAAX,CAAwB,CAC/C,MAAOW,CAAAA,QAAQ,CAAC,CACdd,IAAI,CAAE,aADQ,CAEdE,OAAO,CAAE,CACPC,QAAQ,CAAEA,QADH,CAFK,CAAD,CAAf,CAMD,CAPM,CASP,MAAO,IAAMa,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACF,QAAD,CAAWH,UAAX,CAA0B,CACtD,MAAOG,CAAAA,QAAQ,CAAC,CACdd,IAAI,CAAE,kBADQ,CAEdE,OAAO,CAAE,CACPS,UAAU,CAAEA,UADL,CAFK,CAAD,CAAf,CAMD,CAPM,CASP,MAAO,IAAMM,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACH,QAAD,CAAc,CACrC,MAAOA,CAAAA,QAAQ,CAAC,CACdd,IAAI,CAAE,YADQ,CAAD,CAAf,CAGD,CAJM,CAMP,GAAMkB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,CACrC,qBAAoD5B,eAAe,CACjE,WADiE,CAEjE,EAFiE,CAAnE,sDAAO6B,kBAAP,sBAA2BC,qBAA3B,sBAIA,GAAMC,CAAAA,kBAAkB,CAAG,CACzB7B,UAAU,CAAE,KADa,CAEzBC,KAAK,CAAE0B,kBAAkB,EAAI,EAFJ,CAA3B,CAIA,gBAA0BhC,UAAU,CAACS,OAAD,CAAUyB,kBAAV,CAApC,4CAAOxB,KAAP,iBAAcgB,QAAd,iBACAxB,SAAS,CAAC,UAAM,CACd+B,qBAAqB,CAACvB,KAAK,CAACJ,KAAP,CAArB,CACD,CAFQ,CAEN,CAAC6B,IAAI,CAACC,SAAL,CAAe1B,KAAK,CAACJ,KAArB,CAAD,CAFM,CAAT,CAGA,MACE,MAAC,mBAAD,CAAqB,QAArB,EAA8B,KAAK,CAAEoB,QAArC,UACE,KAAC,gBAAD,CAAkB,QAAlB,EAA2B,KAAK,CAAEhB,KAAlC,UACGqB,QADH,EADF,EADF,CAOD,CApBD,CAsBA,cAAeD,CAAAA,YAAf","sourcesContent":["import React, { useReducer, createContext, useEffect } from \"react\";\r\nimport useLocalStorage from \"../hooks/useLocalStorage\";\r\n\r\nconst initialState = {\r\n  isCartOpen: false,\r\n  items: []\r\n};\r\n\r\nexport const CartStateContext = createContext();\r\nexport const CartDispatchContext = createContext();\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"TOGGLE_CART_POPUP\":\r\n      return {\r\n        ...state,\r\n        isCartOpen: !state.isCartOpen\r\n      };\r\n    case \"ADD_TO_CART\":\r\n      const id = action.payload.cartItem.id;\r\n      const isOld = state.items.map((item) => item.id).includes(id);\r\n      let cartItems = null;\r\n      if (isOld) {\r\n        const items = state.items.map((item) => {\r\n          if (item.id === id) {\r\n            return {\r\n              ...item,\r\n              quantity: item.quantity + 1 \r\n            };\r\n          }\r\n          return item;\r\n        });\r\n        cartItems = [...items];\r\n      } else {\r\n        cartItems = [...state.items, action.payload.cartItem];\r\n      }\r\n      return {\r\n        ...state,\r\n        items: cartItems\r\n      };\r\n    case \"REMOVE_FROM_CART\":\r\n      return {\r\n        ...state,\r\n        items: state.items.filter(\r\n          (item) => item.id !== action.payload.cartItemId\r\n        )\r\n      };\r\n    case \"CLEAR_CART\":\r\n      return {\r\n        ...state,\r\n        ...initialState\r\n      };\r\n    default:\r\n      throw new Error(`Unknown action: ${action.type}`);\r\n  }\r\n};\r\n\r\nexport const toggleCartPopup = (dispatch) => {\r\n  return dispatch({\r\n    type: \"TOGGLE_CART_POPUP\"\r\n  });\r\n};\r\n\r\nexport const addToCart = (dispatch, cartItem) => {\r\n  return dispatch({\r\n    type: \"ADD_TO_CART\",\r\n    payload: {\r\n      cartItem: cartItem\r\n    }\r\n  });\r\n};\r\n\r\nexport const removeFromCart = (dispatch, cartItemId) => {\r\n  return dispatch({\r\n    type: \"REMOVE_FROM_CART\",\r\n    payload: {\r\n      cartItemId: cartItemId\r\n    }\r\n  });\r\n};\r\n\r\nexport const clearCart = (dispatch) => {\r\n  return dispatch({\r\n    type: \"CLEAR_CART\"\r\n  });\r\n};\r\n\r\nconst CartProvider = ({ children }) => {\r\n  const [persistedCartItems, setPersistedCartItems] = useLocalStorage(\r\n    \"cartItems\",\r\n    []\r\n  );\r\n  const persistedCartState = {\r\n    isCartOpen: false,\r\n    items: persistedCartItems || []\r\n  };\r\n  const [state, dispatch] = useReducer(reducer, persistedCartState);\r\n  useEffect(() => {\r\n    setPersistedCartItems(state.items);\r\n  }, [JSON.stringify(state.items)]);\r\n  return (\r\n    <CartDispatchContext.Provider value={dispatch}>\r\n      <CartStateContext.Provider value={state}>\r\n        {children}\r\n      </CartStateContext.Provider>\r\n    </CartDispatchContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartProvider;\r\n"]},"metadata":{},"sourceType":"module"}